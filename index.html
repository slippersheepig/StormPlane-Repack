<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>沙漠风暴REPACK</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- HUD：分数/生命/难度 -->
  <div id="hud" aria-hidden="true">
    <div id="score">分数：0</div>
    <div id="lives">生命：100</div>
    <div id="level">难度：普通</div>
  </div>

  <!-- 菜单：标题 + 难度选择 + 开始按钮 -->
  <div id="menu">
    <div class="panel">
      <h1>逸一世误一时</h1>
      <div class="btns">
        <button type="button" data-diff="easy">简单</button>
        <button type="button" data-diff="normal">普通</button>
        <button type="button" data-diff="hard">困难</button>
      </div>
      <button id="start-btn" type="button">开始游戏</button>
    </div>
  </div>

  <div id="game-container"></div>

  <script src="https://cdn.jsdelivr.net/pyodide/v0.25.1/full/pyodide.js"></script>
  <script>
    (async () => {
      try {
        const pyodide = await loadPyodide();
        const utilsCode = await fetch("utils.py").then(r => r.text());
        pyodide.FS.writeFile("/utils.py", utilsCode);
        const mainCode = await fetch("main.py").then(r => r.text());
        await pyodide.runPythonAsync(mainCode);
      } catch (err) {
        console.error("Failed to load/run Python code:", err);
        alert("加载 Python 失败：" + err);
      }
    })();
  </script>
</body>
</html>
